
<!DOCTYPE html>
<html lang="en" class="min-h-screen">
<head>
    

<title>Ankur Sheel - Postmortem for Spring Challenge 2020 (Codingame AI Contest)</title>
<meta charset="utf-8"/>

<!-- Google Tag Manager -->

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="A postmortem for Spring Challenge 2020, a multiplayer AI bot contest based on Pacman held by codingame"/>
<link href="/assets/styles.css" rel="stylesheet"/>
<link href="/assets/code-styles/obsidian.min.css" rel="stylesheet"/>
<link rel="canonical" href="https://www.ankursheel.com/blog/postmortem-spring-challenge-2020-codingame-ai-contest"/>

<meta itemProp="name" content="Postmortem for Spring Challenge 2020 (Codingame AI Contest)"/>
<meta itemProp="description" content="A postmortem for Spring Challenge 2020, a multiplayer AI bot contest based on Pacman held by codingame"/>
    <meta itemProp="image" content="https://www.ankursheel.com/assets/images/social/postmortem-spring-challenge-2020-codingame-ai-contest-facebook.png"/>
<meta property="og:url" content="https://www.ankursheel.com/blog/postmortem-spring-challenge-2020-codingame-ai-contest"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Postmortem for Spring Challenge 2020 (Codingame AI Contest)"/>
<meta property="og:description" content="A postmortem for Spring Challenge 2020, a multiplayer AI bot contest based on Pacman held by codingame"/>
    <meta property="og:image" content="https://www.ankursheel.com/assets/images/social/postmortem-spring-challenge-2020-codingame-ai-contest-facebook.png"/>
    <meta property="og:image:secure_url" content="https://www.ankursheel.com/assets/images/social/postmortem-spring-challenge-2020-codingame-ai-contest-facebook.png"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:site" content="ankur_sheel"/>
<meta name="twitter:creator" content="ankur_sheel"/>
<meta name="twitter:title" content="Postmortem for Spring Challenge 2020 (Codingame AI Contest)"/>
<meta name="twitter:description" content="A postmortem for Spring Challenge 2020, a multiplayer AI bot contest based on Pacman held by codingame"/>
    <meta name="twitter:image" content="https://www.ankursheel.com/assets/images/social/postmortem-spring-challenge-2020-codingame-ai-contest-twitter.png"/>
    <meta name="twitter:image:secure_url" content="https://www.ankursheel.com/assets/images/social/postmortem-spring-challenge-2020-codingame-ai-contest-twitter.png"/>

</head>
<body class="font-sans font-normal leading-relaxed font-base text-gray-800 min-h-screen bg-gray-100">
<header class="sticky top-0 bg-white shadow-lg z-10">
    

<!-- https://www.section.io/engineering-education/creating-a-responsive-navigation-bar-using-tailwind-css-and-javascript/ -->

<nav>
    <div class="max-w-6xl mx-auto px-4">
        <div class="flex justify-between">
            <div class="flex space-x-7 items-center">
                <!-- Website Logo -->
                <div>
                    <a href="/" class="flex items-center py-4 px-2 ">
                        <span class="font-semibold text-gray-500 text-lg hover:text-green-500">
                            Ankur Sheel
                        </span
                        >
                    </a>
                </div>
                <ul class="hidden lg:flex items-center space-x-1">
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/about">About</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/blog">All Posts</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/tags">All Tags</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/contact">Contact</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/cv">CV</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/impossible-list">Impossible List</a>
                        </li>
                </ul>
            </div>

            <ul class="hidden lg:flex items-center space-x-3">
                <li>
                    <a role="button" class="" target="_blank" rel="noopener noreferrer" href="/rss.xml" title="RSS">
                        <img class="h-8 mr-2 border-none" src="/assets/images/rss.svg" alt="RSS">
                    </a>
                </li>
                <li>
                    <a role="button" class="inline-flex items-center bg-green-400 text-white p-2 rounded-md text-2xl drop-shadow-lg hover:bg-green-800" target="_blank" rel="noopener noreferrer" href="https://www.buymeacoffee.com/ankursheel" title="Did you learn something or find this summary interesting?">
                        <img class="h-8 mr-2 border-none" src="/assets/images/bmc-logo.svg" alt="Buy Me A Coffee">
                        <p class="font-cookie">Buy me a book</p>
                    </a>
                </li>
            </ul>

            <div class="lg:hidden flex items-center">
                <button class="outline-none mobile-menu-button" aria-label="Mobile Menu">
                    <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                              d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>
                    </svg>
                </button>
            </div>

        </div>
        <div class="hidden mobile-menu">
            <ul class="flex flex-col">
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/about" class="block">About</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/blog" class="block">All Posts</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/tags" class="block">All Tags</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/contact" class="block">Contact</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/cv" class="block">CV</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/impossible-list" class="block">Impossible List</a>
                    </li>
            </ul>
        </div>
    </div>
</nav>

</header>
<main class="mx-auto max-w-prose p-8 prose prose-xl prose-purple">
    <h1 class="text-center">Postmortem for Spring Challenge 2020 (Codingame AI Contest)</h1>
    <div class="flex flex-col min-h-screen">
        <article>
            
<div class="prose-sm italic ">
    <div class="flex justify-evenly items-center">
        <i>Last Updated On: 20-May-2020</i>
        <i class="font-bold">
            Reading Time: 4 min
        </i>
    </div>

    <div class="flex flex-row flex-wrap gap-1 place-content-center">
            <div class="flex-initial border-2 border-black p-2 m-2 border rounded-xl">
                <a role="button" href="/tags/codingame" class="badge text-black bg-grey-light no-underline">Codingame</a>
            </div>
            <div class="flex-initial border-2 border-black p-2 m-2 border rounded-xl">
                <a role="button" href="/tags/post-mortem" class="badge text-black bg-grey-light no-underline">post-mortem</a>
            </div>
    </div>
</div>

<html><head></head><body><p>Every couple of weeks, there is a contest hosted by the folks at <a href="http://www.codingame.com/">codingame.com</a>. This time it was based on <strong>Pacman</strong>.</p>
<p>If you just want to look at my statistics for this contest, you can just scroll to the bottom but, then you would miss seeing all the things I did wrong. 😊</p>
<p><img src="/assets/images/posts/postmortem-spring-challenge-2020-codingame-ai-contest/cover.jpg" alt="Spring Challenge 2020"></p>
<h2 id="preamble">Preamble</h2>
<p>For the contest, you were in command of 2 to 5 pacs on a grid, and the goal was to eat more pellets without getting killed by the end of the game. There was a fog of war, and the attack mechanism was based on Rock, Paper, Scissors.</p>
<p>Like all other codingame contests, the game was turn-based. Each turn consisted of you reading the world state information from <em>stdin</em> and outputting your action to <em>stdout</em>. This would be repeated until only 1 bot was alive or a fixed number of rounds had passed.</p>
<p>You also had a maximum of 50 ms to submit your action before you would timeout and die.</p>
<p>There were multiple leagues.</p>
<ul>
<li>Wood 2</li>
<li>Wood 1</li>
<li>Bronze</li>
<li>Silver</li>
<li>Gold</li>
<li>Legend</li>
</ul>
<p>To pass each league, you need to beat the boss of that league. Everyone starts from Wood 2, and depending on how good their bot fares, they move to the higher leagues. Also, as you move to the higher leagues, extra rules might apply.</p>
<p>For this contest, I decided to use C#.</p>
<h2 id="what-went-right">What Went Right</h2>
<ul>
<li><p>I had already participated in a previous contest at codingame, which gave me a base to start from. For other postmortems click <a href="/tags/codingame">here</a>.</p>
</li>
<li><p><strong>Tools from previous contests:</strong></p>
<ul>
<li>CGSync: A google chrome plugin that allowed me to sync a local file to the web IDE. This allowed me to work in Visual Studio, which made for a much faster workflow. The plugin can be found <a href="https://www.codingame.com/forum/t/codingame-sync-beta/614/65">here</a>.</li>
<li>I had already built a utility program that allowed me to combine multiple files into a single c# file which codingame requires. This enabled me to split my code across different files while developing.</li>
<li>I had a python script to help download the game data, parse it and put it into a text file consumed by my program. This allowed me to step through and debug the AI to see that my AI failed to win because of some bug instead of just relying on the stderr stream.</li>
<li>I isolated the IO into a separate class. I made it so that every time I was reading anything from <em>stdin</em>, it was outputted to the error stream.</li>
<li>I had a few global constants, which allowed me to enable/disable logging with a single line change.</li>
</ul>
</li>
<li><p><strong>Using C#</strong>: It is much faster to write code in C# than C++, especially since it's what I am primarily using in my day job.</p>
</li>
<li><p><strong>Continuous refactoring</strong> enabled me to keep my code readable and isolated the areas I had to work on.</p>
</li>
<li><p><strong>Using Source Control</strong>: I cannot even stress how helpful it was to go back a version or two because the new logic was performing even worse than the one a few iterations before. This was especially true when I tried to switch to attack the opponent.</p>
</li>
<li><p><strong>Iterative development</strong>: I reached Silver by concentrating on the movement rather than the pac types.</p>
</li>
<li><p><strong>Precomputing</strong> the neighbour and visible cells in the 1st turn made it easier to calculate the move.</p>
</li>
<li><p>I was in the top 400 for some time.</p>
</li>
</ul>
<h2 id="what-went-wrong">What went wrong</h2>
<ul>
<li>I did not write any tests, making it challenging to have confidence that I was not breaking things as I was refactoring and modifying the algorithm. I introduced a bug after refactoring a few times and did not realise till my rank dropped and I watched a replay.</li>
<li>I did not get to spend as much time as I would have liked on this. With work and other personal commitments, I could only spend a few hours on the problem. I was also unable to work on the weekend just before the contest ended, which dropped my rank from the early 400's to below 600 by the time I finished the contest.</li>
<li>I wanted to Livestream/record my development, but I could not Livestream every time I worked on this. I could only Livestream early morning before starting work.</li>
<li>I was almost able to beat the Siver league Boss. In fact, I was ranked 2 at some point in the league, but I just couldn't get that slight improvement to move to the Gold league.</li>
<li>Quite a few times, the tweaks that I made, made my bot perform worse. This was especially true in the Silver League.</li>
</ul>
<h2 id="what-would-i-do-differently">What would I do differently</h2>
<ul>
<li>Since this was a game of partial information, having an MCTS or even Negamax algorithm might have helped.</li>
<li>Rather than mixing the IO with the state, I should have kept 2 separate classes for the state and memory.</li>
<li>Precomputing all the paths in the 1st turn would have made it faster to tweak the algorithm</li>
<li>Adding a timer for profiling. Some of the tweaks I made resulted in timeouts that could have been optimized if I was profiling.</li>
</ul>
<h2 id="other-notes">Other Notes</h2>
<ul>
<li>This was a fun contest, but the fog of war and partial information was a little annoying.</li>
<li>If you want a copy of any of my tools, let me know on <a href="https://twitter.com/ankur_sheel/status/1263342317894656000">Twitter</a>, and I can make it available.</li>
<li>It would be great if, once the contest has ended, links could be provided to tutorials for the various AI techniques that were successful.</li>
<li>If you want to look at the commit history and get a sense of how I approached the contest, you can find the <a href="https://github.com/AnkurSheel/codingame/tree/JoinThePac">code here</a>.</li>
<li>If you are interested in watching me code parts of the contest, you can find the <a href="https://www.youtube.com/playlist?list=PLyHMMEg7mqQ5IDIgrxixQwdOD5JjcjmuC">playlist here</a>.</li>
</ul>
<h2 id="ranking">Ranking</h2>
<p><strong>League</strong>: Silver</p>
<p><strong>Global Rank</strong>: 654/4955 (13%)</p>
<p><strong>New Zealand</strong>: 6/20</p>
<p><strong>India</strong>: 8/127</p>
<p>Feel free to follow me at codingame using this <a href="https://www.codingame.com/servlet/urlinvite?u=1506970">URL</a>.</p>
</body></html>



<aside class="hidden md:block">
        <div class="flex justify-center gap-x-5 ">
            <a class="bg-social-twitter social-button" href="https://twitter.com/intent/tweet?url=https://www.ankursheel.com/blog/postmortem-spring-challenge-2020-codingame-ai-contest&text=A%20postmortem%20for%20Spring%20Challenge%202020%2C%20a%20multiplayer%20AI%20bot%20contest%20based%20on%20Pacman%20held%20by%20codingame via @ankur_sheel" target="_blank" rel="noopener noreferrer">Tweet this Article</a>
            <a class="bg-social-linkedin social-button" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.ankursheel.com/blog/postmortem-spring-challenge-2020-codingame-ai-contest"target="_blank" rel="noopener noreferrer">Share on Linkedin</a>
        </div>
</aside>



        </article>
    </div>
</main>


<script src="/assets/js/blog.js"></script>
    <script data-goatcounter="https://ankursheel.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>



    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="ankursheel" data-description="Support me on Buy me a coffee!" data-message="Did you learn something or find this summary interesting? Buy me a coffee" data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18"></script>


</body>
</html>
