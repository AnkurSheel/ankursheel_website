
<!DOCTYPE html>
<html lang="en" class="min-h-screen">
<head>
    

<title>Ankur Sheel - A postmortem for Fantastic Bits (Codingame AI Contest)</title>
<meta charset="utf-8"/>

<!-- Google Tag Manager -->

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="A post-mortem for Fantastic Bits, a Codingame contest based on Quidditch from Harry Potter."/>
<link href="/assets/styles.css" rel="stylesheet"/>
<link href="/assets/code-styles/obsidian.min.css" rel="stylesheet"/>
<link rel="canonical" href="https://www.ankursheel.com/blog/fantastic-bits-codingame-ai-contest-postmortem"/>

<meta itemProp="name" content="A postmortem for Fantastic Bits (Codingame AI Contest)"/>
<meta itemProp="description" content="A post-mortem for Fantastic Bits, a Codingame contest based on Quidditch from Harry Potter."/>
    <meta itemProp="image" content="https://www.ankursheel.com/assets/images/social/fantastic-bits-codingame-ai-contest-postmortem-facebook.png"/>
<meta property="og:url" content="https://www.ankursheel.com/blog/fantastic-bits-codingame-ai-contest-postmortem"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="A postmortem for Fantastic Bits (Codingame AI Contest)"/>
<meta property="og:description" content="A post-mortem for Fantastic Bits, a Codingame contest based on Quidditch from Harry Potter."/>
    <meta property="og:image" content="https://www.ankursheel.com/assets/images/social/fantastic-bits-codingame-ai-contest-postmortem-facebook.png"/>
    <meta property="og:image:secure_url" content="https://www.ankursheel.com/assets/images/social/fantastic-bits-codingame-ai-contest-postmortem-facebook.png"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:site" content="ankur_sheel"/>
<meta name="twitter:creator" content="ankur_sheel"/>
<meta name="twitter:title" content="A postmortem for Fantastic Bits (Codingame AI Contest)"/>
<meta name="twitter:description" content="A post-mortem for Fantastic Bits, a Codingame contest based on Quidditch from Harry Potter."/>
    <meta name="twitter:image" content="https://www.ankursheel.com/assets/images/social/fantastic-bits-codingame-ai-contest-postmortem-twitter.png"/>
    <meta name="twitter:image:secure_url" content="https://www.ankursheel.com/assets/images/social/fantastic-bits-codingame-ai-contest-postmortem-twitter.png"/>

</head>
<body class="font-sans font-normal leading-relaxed font-base text-gray-800 min-h-screen bg-gray-100">
<header class="sticky top-0 bg-white shadow-lg z-10">
    

<!-- https://www.section.io/engineering-education/creating-a-responsive-navigation-bar-using-tailwind-css-and-javascript/ -->

<nav>
    <div class="max-w-6xl mx-auto px-4">
        <div class="flex justify-between">
            <div class="flex space-x-7 items-center">
                <!-- Website Logo -->
                <div>
                    <a href="/" class="flex items-center py-4 px-2 ">
                        <span class="font-semibold text-gray-500 text-lg hover:text-green-500">
                            Ankur Sheel
                        </span
                        >
                    </a>
                </div>
                <ul class="hidden lg:flex items-center space-x-1">
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/about">About</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/blog">All Posts</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/tags">All Tags</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/contact">Contact</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/cv">CV</a>
                        </li>
                        <li class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition-all transform hover:scale-110">
                            <a href="/impossible-list">Impossible List</a>
                        </li>
                </ul>
            </div>

            <ul class="hidden lg:flex items-center space-x-3">
                <li>
                    <a role="button" class="" target="_blank" rel="noopener noreferrer" href="/rss.xml" title="RSS">
                        <img class="h-8 mr-2 border-none" src="/assets/images/rss.svg" alt="RSS">
                    </a>
                </li>
                <li>
                    <a role="button" class="inline-flex items-center bg-green-400 text-white p-2 rounded-md text-2xl drop-shadow-lg hover:bg-green-800" target="_blank" rel="noopener noreferrer" href="https://www.buymeacoffee.com/ankursheel" title="Did you learn something or find this summary interesting?">
                        <img class="h-8 mr-2 border-none" src="/assets/images/bmc-logo.svg" alt="Buy Me A Coffee">
                        <p class="font-cookie">Buy me a book</p>
                    </a>
                </li>
            </ul>

            <div class="lg:hidden flex items-center">
                <button class="outline-none mobile-menu-button" aria-label="Mobile Menu">
                    <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
                        <path fill-rule="evenodd"
                              d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>
                    </svg>
                </button>
            </div>

        </div>
        <div class="hidden mobile-menu">
            <ul class="flex flex-col">
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/about" class="block">About</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/blog" class="block">All Posts</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/tags" class="block">All Tags</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/contact" class="block">Contact</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/cv" class="block">CV</a>
                    </li>
                    <li class="text-sm px-2 py-4 hover:bg-green-500 transition duration-300">
                        <a href="/impossible-list" class="block">Impossible List</a>
                    </li>
            </ul>
        </div>
    </div>
</nav>

</header>
<main class="mx-auto max-w-prose p-8 prose prose-xl prose-purple">
    <h1 class="text-center">A postmortem for Fantastic Bits (Codingame AI Contest)</h1>
    <div class="flex flex-col min-h-screen">
        <article>
            
<div class="prose-sm italic ">
    <div class="flex justify-evenly items-center">
        <i>Last Updated On: 15-Dec-2016</i>
        <i class="font-bold">
            Reading Time: 6 min
        </i>
    </div>

    <div class="flex flex-row flex-wrap gap-1 place-content-center">
            <div class="flex-initial border-2 border-black p-2 m-2 border rounded-xl">
                <a role="button" href="/tags/cpp" class="badge text-black bg-grey-light no-underline">cpp</a>
            </div>
            <div class="flex-initial border-2 border-black p-2 m-2 border rounded-xl">
                <a role="button" href="/tags/codingame" class="badge text-black bg-grey-light no-underline">Codingame</a>
            </div>
            <div class="flex-initial border-2 border-black p-2 m-2 border rounded-xl">
                <a role="button" href="/tags/post-mortem" class="badge text-black bg-grey-light no-underline">post-mortem</a>
            </div>
    </div>
</div>

<html><head></head><body><p>Every couple of weeks, there is a contest hosted by the folks at <a href="http://www.codingame.com/">codingame.com</a>. This time around, it was a game of <strong>Quidditch</strong> from the <strong>Harry Potter</strong> world and was named <strong>Fantastic Bits</strong> after the <strong>Fantastic Beasts and Where To Find Them</strong></p>
<p><img src="/assets/images/posts/fantastic-bits-codingame-ai-contest-postmortem/cover.jpg" alt="Fantastic Bits"></p>
<p>If you just want to look at my statistics for this contest, you can just scroll to the bottom but, then you would miss seeing all the things I did wrong. 😊</p>
<h2 id="preamble">Preamble</h2>
<p>For the contest, you played a game of Quidditch and controlled 2 wizards to score points using a Snaffle (Snitch + Quaffle). Like all other codingame contests, the game was turn-based. Each turn consisted of you reading the world state information from stdin and outputting your action to stdout. This would be repeated till either 200 turns had passed or as soon as one player has scored more than half of the possible points. You also had a maximum of 100 ms to submit your action before you would timeout and lose.</p>
<p>There are multiple leagues :</p>
<ul>
<li>Wood 2</li>
<li>Wood 1</li>
<li>Bronze</li>
<li>Silver</li>
<li>Gold</li>
<li>Legend.</li>
</ul>
<p>To pass each league, you need to beat the boss of that league. Everyone starts from Wood 2, and depending on how good their bot fares, they move to the higher leagues. Also, as you move to the higher leagues, additional rules might apply. For example, in wood 1, Bludgers made their entrance, and you could start casting spells from the Bronze league.</p>
<p>You can use multiple languages to submit your solution, but I went with C++ for obvious reasons.</p>
<h2 id="what-went-right">What Went Right</h2>
<ul>
<li>I had already participated in a previous contest at codingame, which gave me a base to start from. For other postmortems click <a href="/tags/codingame">here</a>.</li>
<li>Working with the web IDE (especially with C++)is a bit clunky, but on the forums, I found a google chrome plugin that allowed me to sync a local file to the web IDE. This allowed me to work in Visual Studio, which made for a much faster workflow. The plugin can be found <a href="https://www.codingame.com/forum/t/codingame-sync-beta/614/65">here</a>. I found another tool on the codingame forums that allowed me to test my ide code against other players without submitting my code. The code also allows comparing the ide code with the submitted code. The plugin can be found <a href="https://www.codingame.com/forum/t/introducing-cg-spunk/1895">here</a>.</li>
<li>I already had a setup that allowed me to combine multiple files into a single cpp file which codingame requires. If you would like a copy of the tool, let me know, and I can make it available.</li>
<li>I spent the first day setting up the framework for the game. This included classes to encapsulate the Wizards, Snaffle etc. This allowed me to quickly tweak my algorithms and throw away pieces of code that I felt were not working.</li>
<li>I started with a very simple algorithm that was able to get me into the gold league. I reached the bronze league by just chasing after the closest snaffle and trying to throw it in the opponent's goal. For silver and gold leagues, as soon as I had enough mana, I used an <strong>Accio</strong> if the snaffle was behind a wizard or a <strong>Flippendo</strong> if the snaffle was in front of a wizard and was aligned with the goal.</li>
<li>I was able to simulate a portion of the game except for the collisions. I did write some collision code, but it is untried and untested.</li>
<li>From earlier contests, I had a python script to help download the game data, parse it and put it into a text file consumed by my program. This allowed me to step through and debug the AI to see that my AI was failing to win because of some bug instead of just relying on the stderr stream. If you would like a copy of the script, let me know, and I can make it available.</li>
<li>Continuous refactoring enabled me to keep my code readable and isolated the areas I had to work on.</li>
<li>Working iteratively and using the tools above meant that I could see the impact almost immediately.</li>
<li>Using source control to keep track of the AI. I cannot even stress how helpful it was to go back a version or two because the new logic was performing even worse than a few iterations before. This was especially true when I tried to add support for the spells '<strong>Petrificius'</strong> and '<strong>Obliviate</strong>'.</li>
<li>I made it to the Gold League, which was one of the goals I had set for myself.</li>
</ul>
<h2 id="what-went-wrong">What Went Wrong</h2>
<ul>
<li>Being in New Zealand for the contest from a timezone perspective sucks. The contest starts and ends when you are sleeping.</li>
<li>I did not get to spend as much time as I would have liked on this. With work and other personal commitments, I could only spend a few hours on the problem. I was also unable to work on the weekend just before the contest ended, which dropped my rank from the early 400's to below 600 by the time I finished the contest.</li>
<li>I wasted a lot of time trying to get the 2 spells '<strong>Petrificius</strong>' and '<strong>Obliviate</strong>' to work. In retrospect, I should not have even tried this without having a robust simulation and probably a Genetic Algorithm.</li>
<li>I read the <a href="http://files.magusgeek.com/csb/csb_en.html">Magus's post-mortem and implementation of CSB</a> quite late. Having implemented parts of it would have helped considerably for this contest. Although other than trolling the chat/forums, I don't see how I could have found this earlier. It might be worthwhile for Codingame to give a reference of which bot contest can be used to practice on a few days before the competition starts.</li>
<li>My knowledge and interest in physic systems is relatively low. To have a robust simulation, a good understanding of collision avoidance was required.</li>
<li>I did not get time to implement a Genetic Algorithm or an MCTS, which would have probably helped me gain ranks much faster.</li>
<li>When I was around the 300 mark, I decided to resubmit the existing code. Big Mistake. Even though my code was the same, my rank dropped like a stone underwater. This was probably because other players had submitted improved code and a submit causes a test against all of them. The lesson learnt here is that gain ranks early and submit only if you are relatively sure of gaining more ranks. A lot of information had to be simulated, such as mana, collisions, and some inputs for the opponent. It was just a lot of work to do, along with writing an AI. I guess it would have been easier if I had code that I could reuse from one of the earlier contests</li>
<li>I did not take into consideration that the spells take 1 frame to take effect.</li>
<li>The way I had written the code, the 1st first wizard would always end up using all the mana. This was, in retrospect, inefficient, and I could have improved this without too much effort.</li>
</ul>
<h2 id="what-would-i-do-differently">What would I do differently</h2>
<ul>
<li>Being better at deciding which feature to implement and when to give up and move to another feature.</li>
<li>Try to simulate the game so that I can test everything locally before submitting my code and also be able to use more complex AI techniques.</li>
</ul>
<h2 id="other-notes">Other Notes</h2>
<ul>
<li>This was a fun contest with amazing visuals and complexity.</li>
<li>The twitch stream helped me get familiar with the spells.</li>
<li>If you want a copy of any of my tools, let me know in the comments, and I can make it available.</li>
<li>It would be great if once the contest has ended, links could be provided to tutorials for the various AI techniques that were successful. An example of this would be <a href="http://files.magusgeek.com/csb/csb_en.html">Magus's implementation of CSB</a></li>
</ul>
<h2 id="rankings">Rankings</h2>
<p><strong>League</strong>: Gold</p>
<p><strong>Global Rank</strong>: 642/2399 (27%)</p>
<p><strong>New Zealand</strong>: 13/18</p>
<p><strong>India</strong>: 6/39</p>
<p>Feel free to follow me at codingame using this <a href="https://www.codingame.com/servlet/urlinvite?u=1506970">url</a>. which gave me a base to start from. For other postmortems click <a href="/tags/codingame">here</a>.</p>
</body></html>



<aside class="hidden md:block">
        <div class="flex justify-center gap-x-5 ">
            <a class="bg-social-twitter social-button" href="https://twitter.com/intent/tweet?url=https://www.ankursheel.com/blog/fantastic-bits-codingame-ai-contest-postmortem&text=A%20post-mortem%20for%20Fantastic%20Bits%2C%20a%20Codingame%20contest%20based%20on%20Quidditch%20from%20Harry%20Potter. via @ankur_sheel" target="_blank" rel="noopener noreferrer">Tweet this Article</a>
            <a class="bg-social-linkedin social-button" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.ankursheel.com/blog/fantastic-bits-codingame-ai-contest-postmortem"target="_blank" rel="noopener noreferrer">Share on Linkedin</a>
        </div>
</aside>



        </article>
    </div>
</main>


<script src="/assets/js/blog.js"></script>
    <script data-goatcounter="https://ankursheel.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>



    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="ankursheel" data-description="Support me on Buy me a coffee!" data-message="Did you learn something or find this summary interesting? Buy me a coffee" data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18"></script>


</body>
</html>
